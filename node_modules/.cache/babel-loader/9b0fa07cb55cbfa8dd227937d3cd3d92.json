{"ast":null,"code":"import _regeneratorRuntime from\"/home/dev/Documents/lessons/react - brad traversy/section7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dev/Documents/lessons/react - brad traversy/section7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/dev/Documents/lessons/react - brad traversy/section7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/dev/Documents/lessons/react - brad traversy/section7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dev/Documents/lessons/react - brad traversy/section7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/dev/Documents/lessons/react - brad traversy/section7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/dev/Documents/lessons/react - brad traversy/section7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Consumer}from\"../../context\";// import {v1 as uuid}  from 'uuid';\nimport TextInputGroup from\"../layout/TextInputGroup\";import axios from\"axios\";var AddContact=/*#__PURE__*/function(_Component){_inherits(AddContact,_Component);var _super=_createSuper(AddContact);function AddContact(){var _this;_classCallCheck(this,AddContact);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:'',email:'',phone:'',errors:{}};_this.onChange=function(e){return _this.setState(_defineProperty({},e.target.name,e.target.value));};_this.onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,e){var _this$state,name,email,phone,newContact,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(_this.state);_this$state=_this.state,name=_this$state.name,email=_this$state.email,phone=_this$state.phone;if(!(name==='')){_context.next=6;break;}_this.setState({errors:{name:'Name must be yours and required!'}});return _context.abrupt(\"return\");case 6:if(!(email==='')){_context.next=9;break;}_this.setState({errors:{email:'Email must valid and required!'}});return _context.abrupt(\"return\");case 9:if(!(phone==='')){_context.next=12;break;}_this.setState({errors:{phone:'Phone number would not be extra!'}});return _context.abrupt(\"return\");case 12:newContact={name:name,email:email,phone:phone};_context.prev=13;_context.next=16;return axios.post(\"https://jsonplaceholder.typicode.com/users\",newContact);case 16:res=_context.sent;dispatch({type:'ADD_CONTACT',PAYLOAD:res.data});_context.next=23;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](13);console.log(_context.t0);case 23:_this.setState({name:'',email:'',phone:'',errors:{}});_this.props.history.push('/');case 25:case\"end\":return _context.stop();}}},_callee,null,[[13,20]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();return _this;}_createClass(AddContact,[{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,name=_this$state2.name,email=_this$state2.email,phone=_this$state2.phone,errors=_this$state2.errors;return/*#__PURE__*/React.createElement(Consumer,null,function(value){var dispatch=value.dispatch;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card-header h2\"},\"Add contact form\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body mb-3\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:_this2.onSubmit.bind(_this2,dispatch)},/*#__PURE__*/React.createElement(TextInputGroup,{label:\"Name:\",name:\"name\",placeholder:\"Enter name\",onChange:_this2.onChange,value:name,error:errors.name}),/*#__PURE__*/React.createElement(TextInputGroup,{label:\"Email:\",name:\"email\",placeholder:\"Enter email\",type:\"email\",onChange:_this2.onChange,value:email,error:errors.email}),/*#__PURE__*/React.createElement(TextInputGroup,{label:\"Phone:\",name:\"phone\",placeholder:\"Enter phone\",type:\"phone\",onChange:_this2.onChange,value:phone,error:errors.phone}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Add Contact\",className:\"btn btn-block btn-primary\"}))));});}}]);return AddContact;}(Component);export default AddContact;","map":{"version":3,"sources":["/home/dev/Documents/lessons/react - brad traversy/section7/src/components/contacts/AddContact.js"],"names":["React","Component","Consumer","TextInputGroup","axios","AddContact","state","name","email","phone","errors","onChange","e","setState","target","value","onSubmit","dispatch","preventDefault","console","log","newContact","post","res","type","PAYLOAD","data","props","history","push","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Consumer } from \"../../context\";\n// import {v1 as uuid}  from 'uuid';\nimport TextInputGroup  from \"../layout/TextInputGroup\";\nimport axios from \"axios\";\n\nclass AddContact extends Component {\n  state = {\n    name: '',\n    email: '',\n    phone: '',\n    errors: {}\n  }\n\n\n\n  \n  // onNameChange = (e) => this.setState( {name: e.target.value} );\n  // onEmailChange = (e) => this.setState( {email: e.target.value} );\n  // onPhoneChange = (e) => this.setState( {phone: e.target.value} );\n\n  onChange = e => this.setState(\n    {\n      [e.target.name]: e.target.value\n    }\n  );\n\n\n\n  onSubmit = async (dispatch, e) => {\n    e.preventDefault();\n    console.log(this.state);\n\n    const {name, email, phone} = this.state;\n\n    if (name === '') {\n      this.setState({errors: {name: 'Name must be yours and required!'}});\n      return;\n    }\n    if (email === '') {\n      this.setState({errors: {email: 'Email must valid and required!'}});\n      return;\n    }\n    if (phone === '') {\n      this.setState({errors: {phone: 'Phone number would not be extra!'}});\n      return;\n    }\n\n\n\n    const newContact = {\n      name,\n      email,\n      phone\n    }\n\n    try {\n      const res = await axios.post(`https://jsonplaceholder.typicode.com/users`, newContact);\n      dispatch({type: 'ADD_CONTACT', PAYLOAD: res.data});\n    \n    } catch (error) {\n      console.log(error);\n    }\n    \n\n    this.setState({\n      name: '',\n      email: '',\n      phone: '',\n      errors: {}\n    })\n\n    this.props.history.push('/');\n    \n  }\n\n\n  render() {\n\n\n    const {name, email, phone, errors} = this.state;\n\n\n\n    return (\n      <Consumer>\n        {value => {\n          const { dispatch } = value;\n          return(\n            <div>\n              <div className=\"card-header h2\">\n                Add contact form\n              </div>        \n              <div className=\"card card-body mb-3\">\n                <form onSubmit={this.onSubmit.bind(this, dispatch)}>\n                  <TextInputGroup\n                    label=\"Name:\"\n                    name=\"name\"\n                    placeholder=\"Enter name\"\n                    onChange={this.onChange}\n                    value={name}\n                    error={errors.name}\n                  />\n                  \n                  <TextInputGroup\n                    label=\"Email:\"\n                    name=\"email\"\n                    placeholder=\"Enter email\"\n                    type=\"email\"\n                    onChange={this.onChange}\n                    value={email}\n                    error={errors.email}\n                  />\n                  <TextInputGroup\n                    label=\"Phone:\"\n                    name=\"phone\"\n                    placeholder=\"Enter phone\"\n                    type=\"phone\"\n                    onChange={this.onChange}\n                    value={phone}\n                    error={errors.phone}\n                  />\n                  \n                  <input type=\"submit\" value=\"Add Contact\" className=\"btn btn-block btn-primary\"/>\n                </form>\n              </div>\n            </div>\n          )\n        }}\n      </Consumer>\n    )\n    \n  \n  }\n}\n\nexport default AddContact;"]},"metadata":{},"sourceType":"module"}